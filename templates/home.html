{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h1 class="mb-4">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h1>
        {% for post in posts %}
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <div>
                    <a href="{{ url_for('profile', username=post.author.username) }}" class="text-decoration-none text-dark">
                        <img src="{{ url_for('static', filename=post.author.avatar) }}" 
                             class="rounded-circle me-2" 
                             style="width: 32px; height: 32px; object-fit: cover;" 
                             alt="Avatar">
                        {{ post.author.username }}
                    </a>
                    {% if post.author.is_admin %}
                        <span class="admin-icon" title="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">üëë</span>
                    {% endif %}
                </div>
                <small class="text-muted">
                    <i class="bi bi-clock"></i> {{ post.date_posted.strftime('%d.%m.%Y %H:%M') }}
                </small>
            </div>
            <div class="card-body">
                <h5 class="card-title">
                    <a href="{{ url_for('post', post_id=post.id) }}" class="text-decoration-none text-dark">
                        {{ post.title }}
                    </a>
                </h5>
                <p class="card-text">{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="{{ url_for('post', post_id=post.id) }}" class="btn btn-primary btn-sm">
                        –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                    </a>
                    <small class="text-muted">
                        <i class="bi bi-chat"></i> {{ post.comments|length }} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                    </small>
                </div>
            </div>
        </div>
        {% else %}
        <div class="text-center my-5">
            <i class="bi bi-journal-x display-1 text-muted"></i>
            <h3 class="mt-3">–ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞</h3>
            {% if current_user.is_authenticated %}
                <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º! <a href="{{ url_for('new_post') }}">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a></p>
            {% else %}
                <p><a href="{{ url_for('login') }}">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-door-open"></i> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
                </h5>
                <p class="card-text">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∏ —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö!</p>
                {% if not current_user.is_authenticated %}
                <div class="d-grid gap-2">
                    <a href="{{ url_for('register') }}" class="btn btn-success">
                        <i class="bi bi-person-plus"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </a>
                    <a href="{{ url_for('login') }}" class="btn btn-outline-primary">
                        <i class="bi bi-box-arrow-in-right"></i> –í–æ–π—Ç–∏
                    </a>
                </div>
                {% else %}
                <a href="{{ url_for('new_post') }}" class="btn btn-primary d-block">
                    <i class="bi bi-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
                </a>
                {% endif %}
            </div>
        </div>
        
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-info-circle"></i> –û —Ñ–æ—Ä—É–º–µ
                </h5>
                <p class="card-text">
                    –≠—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ –æ–±—Å—É–∂–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –≤–∞—Å —Ç–µ–º—ã, –¥–µ–ª–∏—Ç—å—Å—è –º–Ω–µ–Ω–∏—è–º–∏ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.
                </p>
                <ul class="list-unstyled">
                    <li><i class="bi bi-check-circle"></i> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–æ—Å—Ç—ã</li>
                    <li><i class="bi bi-check-circle"></i> –ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ</li>
                    <li><i class="bi bi-check-circle"></i> –û–±—â–∞–π—Ç–µ—Å—å</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
